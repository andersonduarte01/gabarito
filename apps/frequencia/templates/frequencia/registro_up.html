{% extends 'temp_base/adm.html' %}
{% load static %}
{% load bootstrap4 %}
{% block titulo %}Atualizar Registro {% endblock %}
{% block imagem_pro %}
<img src="{% if escola.imagem %}
    {{escola.logo_escola.thumbnail.url}}
    {% else %}{% static 'adm/assets/images/user.jpg' %}{% endif %}"
     class="img-radius" alt="Foto_Usuario">
{% endblock %}
{% block conteudo_pro %}
<div class="col-sm-12">
    <!-- Basic Form Inputs card start -->
    <div class="card">
        <div class="card-header">
           <h4 class="h4 text-primary font-weight-bold text-uppercase text-center">Registro de atividades</h4>
           <h6 class="h6 text-primary font-weight-bold text-uppercase text-center">{{sala}} - {{sala.ano}}</h6>
           <h6 class="h6 text-primary font-weight-bold text-uppercase text-center"><div id="dataset"></div></h6>
        </div>
        <div class="card-block">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {% bootstrap_form form layout='inline'%}
                {% buttons %}
                <button type="submit" class="btn btn-outline-primary btn-block"><i class="fas fa-edit"></i>Atualizar</button>
                {% endbuttons %}
            </form>
        </div>
    </div>
    <!-- Basic Form Inputs card end -->
</div>
{% endblock %}
{% block script_pro %}
<script>
    // JavaScript para converter e preencher o campo de data com a data recebida em kwargs
    document.addEventListener('DOMContentLoaded', function() {
        var dataRecebida = '{{ data }}'; // Supondo que o valor seja passado como uma string formatada (exemplo: '2024-03-12')
        var campoData = document.getElementById('id_data'); // Substitua 'id_data' pelo ID real do campo de data

        // Converte a data para o formato dia/mÃªs/ano
        if (dataRecebida) {
            var partesData = dataRecebida.split('-');
            if (partesData.length === 3) {
                var dataFormatada = partesData[2] + '/' + partesData[1] + '/' + partesData[0];
                campoData.value = dataFormatada;
                document.getElementById("dataset").innerHTML = dataFormatada;
            }
        }
    });
</script>
{% endblock %}
